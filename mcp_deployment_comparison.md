# MCP éƒ¨ç½²æ–¹å¼è¯¦ç»†å¯¹æ¯”åˆ†æ

## 1. æ€§èƒ½å·®å¼‚åˆ†æ

### 1.1 å»¶è¿Ÿå¯¹æ¯”

| éƒ¨ç½²æ–¹å¼ | å…¸å‹å»¶è¿Ÿ | å½±å“å› ç´  | ä¼˜åŒ–å»ºè®® |
|---------|---------|---------|---------|
| **æœ¬åœ°éƒ¨ç½²** | 1-5ms | CPUæ€§èƒ½ã€å†…å­˜ | å‡çº§ç¡¬ä»¶ã€ä¼˜åŒ–ä»£ç  |
| **è¿œç¨‹éƒ¨ç½²** | 50-500ms | ç½‘ç»œè·ç¦»ã€å¸¦å®½ã€æœåŠ¡å™¨æ€§èƒ½ | CDNã€å°±è¿‘éƒ¨ç½²ã€ç¼“å­˜ |

### 1.2 å¸¦å®½éœ€æ±‚

```bash
# æœ¬åœ°éƒ¨ç½²å¸¦å®½éœ€æ±‚
- ä¸Šè¡Œï¼š0 (æ— ç½‘ç»œä¼ è¾“)
- ä¸‹è¡Œï¼š0 (æ— ç½‘ç»œä¼ è¾“)
- æ€»è®¡ï¼šå‡ ä¹ä¸º0

# è¿œç¨‹éƒ¨ç½²å¸¦å®½éœ€æ±‚
- å…¸å‹è¯·æ±‚ï¼š1-10KB
- å“åº”æ•°æ®ï¼š10-100KB
- æ¯å°æ—¶ä¼°è®¡ï¼š1-10MB
- æ¯æœˆä¼°è®¡ï¼š100MB-1GB
```

### 1.3 å¯é æ€§å¯¹æ¯”

**æœ¬åœ°éƒ¨ç½²å¯é æ€§ï¼š**
- âœ… ä¸ä¾èµ–ç½‘ç»œè¿æ¥
- âœ… ä¸å—è¿œç¨‹æœåŠ¡å™¨æ•…éšœå½±å“
- âŒ ä¾èµ–æœ¬åœ°æœºå™¨ç¨³å®šæ€§
- âŒ æœ¬åœ°èµ„æºç«äº‰

**è¿œç¨‹éƒ¨ç½²å¯é æ€§ï¼š**
- âœ… ä¸“ä¸šæœåŠ¡å™¨ç®¡ç†
- âœ… è´Ÿè½½å‡è¡¡å’Œæ•…éšœè½¬ç§»
- âŒ ç½‘ç»œè¿æ¥ä¾èµ–
- âŒ è¿œç¨‹æœåŠ¡å™¨æ•…éšœé£é™©

## 2. å®‰å…¨æ€§å·®å¼‚

### 2.1 æ•°æ®ä¼ è¾“å®‰å…¨

**æœ¬åœ°éƒ¨ç½²ï¼š**
```bash
# æ•°æ®æµå‘ï¼šClaude Desktop â†” æœ¬åœ°MCPæœåŠ¡å™¨
# ä¼ è¾“æ–¹å¼ï¼šè¿›ç¨‹é—´é€šä¿¡ (IPC)
# å®‰å…¨çº§åˆ«ï¼šæ“ä½œç³»ç»Ÿçº§åˆ«ä¿æŠ¤
# é£é™©ï¼šæœ¬åœ°æ¶æ„è½¯ä»¶ã€æƒé™æå‡æ”»å‡»
```

**è¿œç¨‹éƒ¨ç½²ï¼š**
```bash
# æ•°æ®æµå‘ï¼šClaude Desktop â†” ç½‘ç»œ â†” è¿œç¨‹MCPæœåŠ¡å™¨
# ä¼ è¾“æ–¹å¼ï¼šHTTPS/WSSåŠ å¯†
# å®‰å…¨çº§åˆ«ï¼šTLS 1.3åŠ å¯†
# é£é™©ï¼šä¸­é—´äººæ”»å‡»ã€ç½‘ç»œçªƒå¬ã€æœåŠ¡å™¨å…¥ä¾µ
```

### 2.2 è®¿é—®æ§åˆ¶

**æœ¬åœ°éƒ¨ç½²è®¿é—®æ§åˆ¶ï¼š**
```json
{
  "æœ¬åœ°æƒé™æ§åˆ¶": {
    "æ–‡ä»¶ç³»ç»Ÿ": "æœ¬åœ°ç”¨æˆ·æƒé™",
    "ç½‘ç»œè®¿é—®": "é˜²ç«å¢™è§„åˆ™",
    "è¿›ç¨‹éš”ç¦»": "æ“ä½œç³»ç»Ÿæ²™ç®±",
    "è®¤è¯": "æ— éœ€ç½‘ç»œè®¤è¯"
  }
}
```

**è¿œç¨‹éƒ¨ç½²è®¿é—®æ§åˆ¶ï¼š**
```json
{
  "è¿œç¨‹æƒé™æ§åˆ¶": {
    "APIè®¤è¯": "Token/JWTéªŒè¯",
    "ç½‘ç»œå®‰å…¨": "VPN/é˜²ç«å¢™",
    "æœåŠ¡å™¨å®‰å…¨": "å®¹å™¨éš”ç¦»/æƒé™æ§åˆ¶",
    "ä¼ è¾“åŠ å¯†": "TLS/SSLè¯ä¹¦"
  }
}
```

## 3. ç»´æŠ¤å’Œç®¡ç†å·®å¼‚

### 3.1 æœ¬åœ°éƒ¨ç½²ç»´æŠ¤

**ä¼˜åŠ¿ï¼š**
- ç®€å•çš„ä¾èµ–ç®¡ç†
- ç›´æ¥çš„æ•…éšœè¯Šæ–­
- æ— éœ€æœåŠ¡å™¨è¿ç»´

**æŒ‘æˆ˜ï¼š**
- å¤šè®¾å¤‡åŒæ­¥å›°éš¾
- ç‰ˆæœ¬æ›´æ–°éœ€è¦æ‰‹åŠ¨æ“ä½œ
- èµ„æºä½¿ç”¨ç›‘æ§æœ‰é™

**ç»´æŠ¤è„šæœ¬ç¤ºä¾‹ï¼š**
```bash
#!/bin/bash
# æœ¬åœ°MCPç»´æŠ¤è„šæœ¬

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
check_local_mcp() {
    if pgrep -f "context7-mcp" > /dev/null; then
        echo "âœ… MCPæœåŠ¡è¿è¡Œæ­£å¸¸"
    else
        echo "âŒ MCPæœåŠ¡æœªè¿è¡Œ"
    fi
}

# æ›´æ–°MCPæœåŠ¡å™¨
update_local_mcp() {
    echo "ğŸ”„ æ›´æ–°MCPæœåŠ¡å™¨..."
    npm update -g @upstash/context7-mcp
    echo "âœ… æ›´æ–°å®Œæˆ"
}

# æ¸…ç†ç¼“å­˜
clean_cache() {
    echo "ğŸ§¹ æ¸…ç†npmç¼“å­˜..."
    npm cache clean --force
    echo "âœ… ç¼“å­˜æ¸…ç†å®Œæˆ"
}
```

### 3.2 è¿œç¨‹éƒ¨ç½²ç»´æŠ¤

**ä¼˜åŠ¿ï¼š**
- é›†ä¸­åŒ–ç®¡ç†
- ä¸“ä¸šè¿ç»´å›¢é˜Ÿ
- è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œç›‘æ§

**æŒ‘æˆ˜ï¼š**
- å¤æ‚çš„åŸºç¡€è®¾æ–½
- ç½‘ç»œå’Œå®‰å…¨é…ç½®
- æˆæœ¬å’Œèµ„æºç®¡ç†

**ç»´æŠ¤è„šæœ¬ç¤ºä¾‹ï¼š**
```bash
#!/bin/bash
# è¿œç¨‹MCPç»´æŠ¤è„šæœ¬

# å¥åº·æ£€æŸ¥
health_check() {
    response=$(curl -s -o /dev/null -w "%{http_code}" https://your-mcp-server.com/health)
    if [ "$response" = "200" ]; then
        echo "âœ… è¿œç¨‹MCPæœåŠ¡å¥åº·"
    else
        echo "âŒ è¿œç¨‹MCPæœåŠ¡å¼‚å¸¸: $response"
    fi
}

# éƒ¨ç½²æ–°ç‰ˆæœ¬
deploy_update() {
    echo "ğŸš€ éƒ¨ç½²æ–°ç‰ˆæœ¬..."
    docker-compose pull
    docker-compose up -d
    echo "âœ… éƒ¨ç½²å®Œæˆ"
}

# ç›‘æ§èµ„æºä½¿ç”¨
monitor_resources() {
    echo "ğŸ“Š èµ„æºä½¿ç”¨æƒ…å†µ:"
    docker stats --no-stream context7-mcp
}
```

## 4. æˆæœ¬è€ƒè™‘

### 4.1 æœ¬åœ°éƒ¨ç½²æˆæœ¬

```bash
# ä¸€æ¬¡æ€§æˆæœ¬
- ç¡¬ä»¶ï¼šå·²æœ‰è®¾å¤‡ï¼Œæ— é¢å¤–æˆæœ¬
- è½¯ä»¶ï¼šå¼€æºè½¯ä»¶ï¼Œå…è´¹
- å®‰è£…ï¼šä¸€æ¬¡æ€§æ—¶é—´æŠ•å…¥

# æŒç»­æˆæœ¬
- ç”µåŠ›ï¼šçº¦$1-5/æœˆï¼ˆå–å†³äºä½¿ç”¨é¢‘ç‡ï¼‰
- ç»´æŠ¤ï¼šä¸ªäººæ—¶é—´æŠ•å…¥
- å‡çº§ï¼šå¶å°”çš„æ—¶é—´æŠ•å…¥

# æ€»è®¡ï¼šå‡ ä¹ä¸º0çš„è´§å¸æˆæœ¬
```

### 4.2 è¿œç¨‹éƒ¨ç½²æˆæœ¬

```bash
# æœåŠ¡å™¨æˆæœ¬ï¼ˆæœˆåº¦ï¼‰
- VPS (2æ ¸4GB)ï¼š$10-20/æœˆ
- äº‘æœåŠ¡å™¨ï¼š$15-50/æœˆ
- ä¸“ç”¨æœåŠ¡å™¨ï¼š$50-200/æœˆ

# ç½‘ç»œæˆæœ¬
- å¸¦å®½ï¼š$5-20/æœˆ
- CDNï¼š$5-15/æœˆ
- è´Ÿè½½å‡è¡¡ï¼š$10-30/æœˆ

# è¿ç»´æˆæœ¬
- ç›‘æ§æœåŠ¡ï¼š$10-50/æœˆ
- å¤‡ä»½å­˜å‚¨ï¼š$5-20/æœˆ
- SSLè¯ä¹¦ï¼š$0-100/å¹´

# æ€»è®¡ï¼š$50-300/æœˆ
```

## 5. æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 5.1 æœ¬åœ°éƒ¨ç½²ä¼˜åŒ–

```bash
# ç³»ç»Ÿä¼˜åŒ–
- å¢åŠ å†…å­˜åˆ†é…
- ä½¿ç”¨SSDå­˜å‚¨
- ä¼˜åŒ–Node.jså‚æ•°

# é…ç½®ä¼˜åŒ–
export NODE_OPTIONS="--max-old-space-size=4096"
export UV_THREADPOOL_SIZE=16
```

### 5.2 è¿œç¨‹éƒ¨ç½²ä¼˜åŒ–

```yaml
# Dockerä¼˜åŒ–é…ç½®
version: '3.8'
services:
  context7-mcp:
    image: node:20-alpine
    deploy:
      resources:
        limits:
          cpus: '2.0'
          memory: 4G
        reservations:
          cpus: '1.0'
          memory: 2G
    environment:
      - NODE_ENV=production
      - NODE_OPTIONS=--max-old-space-size=3072
```

## 6. ç›‘æ§å’Œæ—¥å¿—

### 6.1 æœ¬åœ°ç›‘æ§

```bash
# ç®€å•ç›‘æ§è„šæœ¬
#!/bin/bash
while true; do
    echo "$(date): MCPè¿›ç¨‹æ•°: $(pgrep -c context7-mcp)"
    echo "$(date): å†…å­˜ä½¿ç”¨: $(ps -o pid,vsz,rss,comm -p $(pgrep context7-mcp))"
    sleep 60
done > mcp_monitor.log
```

### 6.2 è¿œç¨‹ç›‘æ§

```yaml
# Prometheus + Grafana ç›‘æ§é…ç½®
version: '3.8'
services:
  prometheus:
    image: prom/prometheus
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml

  grafana:
    image: grafana/grafana
    ports:
      - "3001:3000"
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin
```
