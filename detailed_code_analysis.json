{
  "api_patterns": [
    {
      "count": 6,
      "pattern_type": "APIè°ƒç”¨",
      "examples": [
        {
          "pattern": "(api_(get|post|put|delete)\\s*\\([^)]+\\))",
          "call": "api_get('/MiniTicket/index.php/MiniMember/getMemberInfo', cinemaid, params)",
          "start": 37365,
          "end": 37440
        },
        {
          "pattern": "(api_(get|post|put|delete)\\s*\\([^)]+\\))",
          "call": "api_get('/MiniTicket/index.php/MiniMember/getMemberInfo', cinema_id, params)",
          "start": 90243,
          "end": 90319
        },
        {
          "pattern": "(api_(get|post|put|delete)\\s*\\([^)]+\\))",
          "call": "api_get('/MiniTicket/index.php/MiniOrder/getUnpaidOrderDetail', cinema_id, params)",
          "start": 93509,
          "end": 93591
        }
      ],
      "refactoring_suggestion": "æå–ä¸ºé€šç”¨APIè°ƒç”¨æ–¹æ³•ï¼Œç»Ÿä¸€é”™è¯¯å¤„ç†å’Œå‚æ•°éªŒè¯"
    }
  ],
  "ui_patterns": [
    {
      "count": 21,
      "pattern_type": "å…¶ä»–",
      "examples": [
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "qtSignal(dict)",
          "start": 1676,
          "end": 1690
        },
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "QHBoxLayout(central_widget)",
          "start": 4513,
          "end": 4540
        },
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "QVBoxLayout(widget)",
          "start": 6072,
          "end": 6091
        }
      ],
      "refactoring_suggestion": "è€ƒè™‘æå–ä¸ºå…¬å…±å‡½æ•°æˆ–å¸¸é‡"
    },
    {
      "count": 17,
      "pattern_type": "UIç»„ä»¶",
      "examples": [
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "QWidget()",
          "start": 4410,
          "end": 4419
        },
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "QVBoxLayout()",
          "start": 5085,
          "end": 5098
        },
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "QWidget()",
          "start": 5468,
          "end": 5477
        }
      ],
      "refactoring_suggestion": "åˆ›å»ºUIç»„ä»¶å·¥å‚ç±»ï¼Œç»Ÿä¸€ç»„ä»¶åˆ›å»ºå’Œæ ·å¼è®¾ç½®"
    },
    {
      "count": 5,
      "pattern_type": "UIç»„ä»¶",
      "examples": [
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "QPushButton(\"å¤åˆ¶è·¯å¾„\")",
          "start": 7989,
          "end": 8008
        },
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "QPushButton(\"å¤åˆ¶å›¾ç‰‡\")",
          "start": 8631,
          "end": 8650
        },
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "qrcode_text(\"äºŒç»´ç æ•°æ®æ ¼å¼é”™è¯¯\")",
          "start": 76034,
          "end": 76058
        }
      ],
      "refactoring_suggestion": "åˆ›å»ºUIç»„ä»¶å·¥å‚ç±»ï¼Œç»Ÿä¸€ç»„ä»¶åˆ›å»ºå’Œæ ·å¼è®¾ç½®"
    },
    {
      "count": 3,
      "pattern_type": "UIç»„ä»¶",
      "examples": [
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "QByteArray(self.current_qr_bytes)",
          "start": 13211,
          "end": 13244
        },
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "QVBoxLayout(self.coupon_list_widget)",
          "start": 159872,
          "end": 159908
        },
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "QApplication(sys.argv)",
          "start": 167208,
          "end": 167230
        }
      ],
      "refactoring_suggestion": "åˆ›å»ºUIç»„ä»¶å·¥å‚ç±»ï¼Œç»Ÿä¸€ç»„ä»¶åˆ›å»ºå’Œæ ·å¼è®¾ç½®"
    },
    {
      "count": 5,
      "pattern_type": "å…¶ä»–",
      "examples": [
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "quested(self, login_data: dict)",
          "start": 22979,
          "end": 23010
        },
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "quested(self, seat_load_data: dict)",
          "start": 63413,
          "end": 63448
        },
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "qrcode(self, order_id: str)",
          "start": 72378,
          "end": 72405
        }
      ],
      "refactoring_suggestion": "è€ƒè™‘æå–ä¸ºå…¬å…±å‡½æ•°æˆ–å¸¸é‡"
    },
    {
      "count": 3,
      "pattern_type": "å…¶ä»–",
      "examples": [
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "qr_code(self, qr_code)",
          "start": 45818,
          "end": 45840
        },
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "qrcode(ticket_code, detail_data)",
          "start": 70565,
          "end": 70597
        },
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "qrcode(self, qr_data)",
          "start": 73003,
          "end": 73024
        }
      ],
      "refactoring_suggestion": "è€ƒè™‘æå–ä¸ºå…¬å…±å‡½æ•°æˆ–å¸¸é‡"
    },
    {
      "count": 2,
      "pattern_type": "å…¶ä»–",
      "examples": [
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "qrcode_image(qr_bytes, order_id, cinema_id)",
          "start": 70758,
          "end": 70801
        },
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "qrcode_image(qr_bytes, order_no, data_format)",
          "start": 75459,
          "end": 75504
        }
      ],
      "refactoring_suggestion": "è€ƒè™‘æå–ä¸ºå…¬å…±å‡½æ•°æˆ–å¸¸é‡"
    },
    {
      "count": 2,
      "pattern_type": "å…¶ä»–",
      "examples": [
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "qrcode_text(f\"ğŸ« å–ç¥¨ç : {ticket_code}\\nğŸ“‹ è®¢å•å·: {order_no}\\nâš ï¸ äºŒç»´ç æ˜¾ç¤ºå¤±è´¥\")",
          "start": 86318,
          "end": 86385
        },
        {
          "pattern": "(Q\\w+\\([^)]*\\))",
          "call": "qrcode_text(f\"ğŸ« å–ç¥¨ç : {ticket_code}\\nğŸ“‹ è®¢å•å·: {order_no}\\nâš ï¸ äºŒç»´ç å¤„ç†å¤±è´¥\")",
          "start": 86516,
          "end": 86583
        }
      ],
      "refactoring_suggestion": "è€ƒè™‘æå–ä¸ºå…¬å…±å‡½æ•°æˆ–å¸¸é‡"
    },
    {
      "count": 9,
      "pattern_type": "UIç»„ä»¶",
      "examples": [
        {
          "pattern": "(\\w+\\.setLayout\\([^)]+\\))",
          "call": "center_container.setLayout(center_layout)",
          "start": 5486,
          "end": 5527
        },
        {
          "pattern": "(\\w+\\.setStyleSheet\\([^)]+\\))",
          "call": "seat_placeholder.setStyleSheet(style)",
          "start": 50193,
          "end": 50230
        },
        {
          "pattern": "(\\w+\\.addWidget\\([^)]+\\))",
          "call": "main_layout.addWidget(center_container)",
          "start": 5590,
          "end": 5629
        }
      ],
      "refactoring_suggestion": "åˆ›å»ºUIç»„ä»¶å·¥å‚ç±»ï¼Œç»Ÿä¸€ç»„ä»¶åˆ›å»ºå’Œæ ·å¼è®¾ç½®"
    },
    {
      "count": 2,
      "pattern_type": "UIç»„ä»¶",
      "examples": [
        {
          "pattern": "(\\w+\\.setStyleSheet\\([^)]+\\))",
          "call": "copy_path_btn.setStyleSheet(\"\"\"\n            QPushButton {\n                background-color: #2196f3;\n                color: white;\n                border: none;\n                border-radius: 4px;\n                font: 12px \"Microsoft YaHei\";\n            }\n            QPushButton:hover {\n                background-color: #1976d2;\n            }\n            QPushButton:pressed {\n                background-color: #0d47a1;\n            }\n        \"\"\")",
          "start": 8070,
          "end": 8519
        },
        {
          "pattern": "(\\w+\\.setStyleSheet\\([^)]+\\))",
          "call": "copy_image_btn.setStyleSheet(\"\"\"\n            QPushButton {\n                background-color: #4caf50;\n                color: white;\n                border: none;\n                border-radius: 4px;\n                font: 12px \"Microsoft YaHei\";\n            }\n            QPushButton:hover {\n                background-color: #388e3c;\n            }\n            QPushButton:pressed {\n                background-color: #2e7d32;\n            }\n        \"\"\")",
          "start": 8713,
          "end": 9163
        }
      ],
      "refactoring_suggestion": "åˆ›å»ºUIç»„ä»¶å·¥å‚ç±»ï¼Œç»Ÿä¸€ç»„ä»¶åˆ›å»ºå’Œæ ·å¼è®¾ç½®"
    },
    {
      "count": 3,
      "pattern_type": "UIç»„ä»¶",
      "examples": [
        {
          "pattern": "(\\w+\\.setStyleSheet\\([^)]+\\))",
          "call": "qr_display.setStyleSheet(\"\"\"\n                    QLabel {\n                        color: #2e7d32;\n                        font: bold 12px \"Microsoft YaHei\";\n                        background-color: #e8f5e8;\n                        border: 2px solid #4caf50;\n                        padding: 20px;\n                        border-radius: 5px;\n                    }\n                \"\"\")",
          "start": 45988,
          "end": 46372
        },
        {
          "pattern": "(\\w+\\.setStyleSheet\\([^)]+\\))",
          "call": "qr_display.setStyleSheet(\"\"\"\n                    QLabel {\n                        color: #2e7d32;\n                        font: bold 12px \"Microsoft YaHei\";\n                        background-color: #e8f5e8;\n                        border: 2px solid #4caf50;\n                        padding: 20px;\n                        border-radius: 5px;\n                    }\n                \"\"\")",
          "start": 68753,
          "end": 69137
        },
        {
          "pattern": "(\\w+\\.setStyleSheet\\([^)]+\\))",
          "call": "qr_display.setStyleSheet(\"\"\"\n                    QLabel {\n                        color: #2e7d32;\n                        font: bold 12px \"Microsoft YaHei\";\n                        background-color: #e8f5e8;\n                        border: 2px solid #4caf50;\n                        padding: 20px;\n                        border-radius: 5px;\n                    }\n                \"\"\")",
          "start": 87023,
          "end": 87407
        }
      ],
      "refactoring_suggestion": "åˆ›å»ºUIç»„ä»¶å·¥å‚ç±»ï¼Œç»Ÿä¸€ç»„ä»¶åˆ›å»ºå’Œæ ·å¼è®¾ç½®"
    },
    {
      "count": 2,
      "pattern_type": "UIç»„ä»¶",
      "examples": [
        {
          "pattern": "(\\w+\\.setStyleSheet\\([^)]+\\))",
          "call": "qr_display.setStyleSheet(\"\"\"\n                        QLabel {\n                            background-color: #ffffff;\n                            border: 2px solid #4caf50;\n                            padding: 10px;\n                            border-radius: 5px;\n                        }\n                    \"\"\")",
          "start": 77183,
          "end": 77496
        },
        {
          "pattern": "(\\w+\\.setStyleSheet\\([^)]+\\))",
          "call": "qr_display.setStyleSheet(\"\"\"\n                        QLabel {\n                            background-color: #ffffff;\n                            border: 2px solid #2196f3;\n                            padding: 10px;\n                            border-radius: 8px;\n                        }\n                    \"\"\")",
          "start": 81720,
          "end": 82033
        }
      ],
      "refactoring_suggestion": "åˆ›å»ºUIç»„ä»¶å·¥å‚ç±»ï¼Œç»Ÿä¸€ç»„ä»¶åˆ›å»ºå’Œæ ·å¼è®¾ç½®"
    },
    {
      "count": 3,
      "pattern_type": "å…¶ä»–",
      "examples": [
        {
          "pattern": "(\\w+\\.setStyleSheet\\([^)]+\\))",
          "call": "coupon_title.setStyleSheet(\"font: bold 12px 'Microsoft YaHei'; color: #333333; margin-top: 10px;\")",
          "start": 160865,
          "end": 160963
        },
        {
          "pattern": "(\\w+\\.setStyleSheet\\([^)]+\\))",
          "call": "type_label.setStyleSheet(\"font: 10px 'Microsoft YaHei'; color: #666666;\")",
          "start": 162503,
          "end": 162576
        },
        {
          "pattern": "(\\w+\\.setStyleSheet\\([^)]+\\))",
          "call": "info_label.setStyleSheet(\"font: 10px 'Microsoft YaHei'; color: #333333;\")",
          "start": 162732,
          "end": 162805
        }
      ],
      "refactoring_suggestion": "è€ƒè™‘æå–ä¸ºå…¬å…±å‡½æ•°æˆ–å¸¸é‡"
    },
    {
      "count": 35,
      "pattern_type": "å…¶ä»–",
      "examples": [
        {
          "pattern": "(\\w+\\.connect\\([^)]+\\))",
          "call": "clicked.connect(self._on_copy_path)",
          "start": 8547,
          "end": 8582
        },
        {
          "pattern": "(\\w+\\.connect\\([^)]+\\))",
          "call": "clicked.connect(self._on_copy_image)",
          "start": 9192,
          "end": 9228
        },
        {
          "pattern": "(\\w+\\.connect\\([^)]+\\))",
          "call": "account_selected.connect(self._on_account_selected)",
          "start": 14339,
          "end": 14390
        }
      ],
      "refactoring_suggestion": "è€ƒè™‘æå–ä¸ºå…¬å…±å‡½æ•°æˆ–å¸¸é‡"
    },
    {
      "count": 2,
      "pattern_type": "UIç»„ä»¶",
      "examples": [
        {
          "pattern": "(\\w+\\.addWidget\\([^)]+\\))",
          "call": "center_layout.addWidget(self.tab_manager_widget, 38)",
          "start": 5197,
          "end": 5249
        },
        {
          "pattern": "(\\w+\\.addWidget\\([^)]+\\))",
          "call": "center_layout.addWidget(self.seat_widget, 62)",
          "start": 5364,
          "end": 5409
        }
      ],
      "refactoring_suggestion": "åˆ›å»ºUIç»„ä»¶å·¥å‚ç±»ï¼Œç»Ÿä¸€ç»„ä»¶åˆ›å»ºå’Œæ ·å¼è®¾ç½®"
    },
    {
      "count": 2,
      "pattern_type": "UIç»„ä»¶",
      "examples": [
        {
          "pattern": "(\\w+\\.addWidget\\([^)]+\\))",
          "call": "layout.addWidget(qr_group, 45)",
          "start": 10053,
          "end": 10083
        },
        {
          "pattern": "(\\w+\\.addWidget\\([^)]+\\))",
          "call": "layout.addWidget(order_group, 55)",
          "start": 12215,
          "end": 12248
        }
      ],
      "refactoring_suggestion": "åˆ›å»ºUIç»„ä»¶å·¥å‚ç±»ï¼Œç»Ÿä¸€ç»„ä»¶åˆ›å»ºå’Œæ ·å¼è®¾ç½®"
    }
  ],
  "error_handling_patterns": [
    {
      "count": 5,
      "pattern_type": "UIç»„ä»¶",
      "examples": [
        {
          "pattern": "(QMessageBox\\.(warning|critical|information)\\([^)]+\\))",
          "call": "QMessageBox.critical(self, \"å¯åŠ¨é”™è¯¯\", f\"å¯åŠ¨è®¤è¯æ£€æŸ¥å¤±è´¥: {str(e)",
          "start": 16192,
          "end": 16246
        },
        {
          "pattern": "(QMessageBox\\.(warning|critical|information)\\([^)]+\\))",
          "call": "QMessageBox.critical(self, \"ç™»å½•å¤„ç†é”™è¯¯\", f\"å¤„ç†ç™»å½•ç»“æœå¤±è´¥: {str(e)",
          "start": 17089,
          "end": 17145
        },
        {
          "pattern": "(QMessageBox\\.(warning|critical|information)\\([^)]+\\))",
          "call": "QMessageBox.critical(self, \"æ˜¾ç¤ºä¸»çª—å£é”™è¯¯\", f\"æ˜¾ç¤ºä¸»çª—å£å¤±è´¥: {str(e)",
          "start": 17870,
          "end": 17926
        }
      ],
      "refactoring_suggestion": "åˆ›å»ºUIç»„ä»¶å·¥å‚ç±»ï¼Œç»Ÿä¸€ç»„ä»¶åˆ›å»ºå’Œæ ·å¼è®¾ç½®"
    },
    {
      "count": 3,
      "pattern_type": "UIç»„ä»¶",
      "examples": [
        {
          "pattern": "(QMessageBox\\.(warning|critical|information)\\([^)]+\\))",
          "call": "QMessageBox.critical(self, \"ç™»å½•å¤±è´¥\", \"ç”¨æˆ·ä¿¡æ¯ä¸å®Œæ•´ï¼šç¼ºå°‘æ‰‹æœºå·\")",
          "start": 16481,
          "end": 16532
        },
        {
          "pattern": "(QMessageBox\\.(warning|critical|information)\\([^)]+\\))",
          "call": "QMessageBox.information(self, \"ç™»å½•è¯·æ±‚\", \"å½±é™¢è´¦å·ç™»å½•åŠŸèƒ½å·²ç®€åŒ–ï¼Œè¯·ç›´æ¥ä»è´¦å·åˆ—è¡¨ä¸­é€‰æ‹©è´¦å·\")",
          "start": 23043,
          "end": 23109
        },
        {
          "pattern": "(QMessageBox\\.(warning|critical|information)\\([^)]+\\))",
          "call": "QMessageBox.information(self, \"è®¾ç½®æˆåŠŸ\", \"æ”¯ä»˜å¯†ç è®¾ç½®æˆåŠŸï¼\")",
          "start": 102329,
          "end": 102379
        }
      ],
      "refactoring_suggestion": "åˆ›å»ºUIç»„ä»¶å·¥å‚ç±»ï¼Œç»Ÿä¸€ç»„ä»¶åˆ›å»ºå’Œæ ·å¼è®¾ç½®"
    },
    {
      "count": 2,
      "pattern_type": "UIç»„ä»¶",
      "examples": [
        {
          "pattern": "(QMessageBox\\.(warning|critical|information)\\([^)]+\\))",
          "call": "QMessageBox.information(self, \"æ”¯ä»˜æˆåŠŸ\", result.get('message', 'æ”¯ä»˜æˆåŠŸï¼')",
          "start": 117108,
          "end": 117176
        },
        {
          "pattern": "(QMessageBox\\.(warning|critical|information)\\([^)]+\\))",
          "call": "QMessageBox.warning(self, \"æ”¯ä»˜å¤±è´¥\", result.get('error', 'æ”¯ä»˜å¤±è´¥')",
          "start": 117756,
          "end": 117817
        }
      ],
      "refactoring_suggestion": "åˆ›å»ºUIç»„ä»¶å·¥å‚ç±»ï¼Œç»Ÿä¸€ç»„ä»¶åˆ›å»ºå’Œæ ·å¼è®¾ç½®"
    },
    {
      "count": 2,
      "pattern_type": "é”™è¯¯å¤„ç†",
      "examples": [
        {
          "pattern": "(print\\([\"\\'].*?error.*?[\"\\'][^)]*\\))",
          "call": "print(\"[ä¸»çª—å£] åˆ¸åˆ—è¡¨åŠ è½½å¤±è´¥ï¼šç¼ºå°‘å¿…è¦å‚æ•°\")\n                self._show_coupon_error_message(\"å‚æ•°ä¸å®Œæ•´ï¼Œæ— æ³•åŠ è½½åˆ¸åˆ—è¡¨\")",
          "start": 137878,
          "end": 137972
        },
        {
          "pattern": "(print\\([\"\\'].*?error.*?[\"\\'][^)]*\\))",
          "call": "print(\"[ä¸»çª—å£] åˆ¸åˆ—è¡¨APIè¿”å›Noneï¼Œå¯èƒ½æ˜¯ç½‘ç»œå¼‚å¸¸æˆ–æœåŠ¡å™¨æ— å“åº”\")\n                self._show_coupon_error_message(\"ç½‘ç»œå¼‚å¸¸ï¼Œæ— æ³•è·å–åˆ¸åˆ—è¡¨\")",
          "start": 138840,
          "end": 138946
        }
      ],
      "refactoring_suggestion": "åˆ›å»ºç»Ÿä¸€çš„é”™è¯¯å¤„ç†è£…é¥°å™¨æˆ–åŸºç±»æ–¹æ³•"
    }
  ],
  "data_processing_patterns": [
    {
      "count": 2,
      "pattern_type": "æ•°æ®å¤„ç†",
      "examples": [
        {
          "pattern": "(json\\.(loads|dumps)\\([^)]+\\))",
          "call": "json.dumps({\n                    'cardno': member_info.get('cardno', '')",
          "start": 108029,
          "end": 108101
        },
        {
          "pattern": "(json\\.(loads|dumps)\\([^)]+\\))",
          "call": "json.dumps({\n                    'cardno': member_info.get('cardno', '')",
          "start": 112384,
          "end": 112456
        }
      ],
      "refactoring_suggestion": "æå–ä¸ºæ•°æ®å¤„ç†å·¥å…·ç±»çš„é™æ€æ–¹æ³•"
    },
    {
      "count": 286,
      "pattern_type": "æ•°æ®å¤„ç†",
      "examples": [
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "user_info.get(\"phone\", \"\")",
          "start": 16412,
          "end": 16438
        },
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "first_cinema.get('cinemaShortName', '')",
          "start": 18388,
          "end": 18427
        },
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "first_cinema.get('cinemaid', '')",
          "start": 18452,
          "end": 18484
        }
      ],
      "refactoring_suggestion": "æå–ä¸ºæ•°æ®å¤„ç†å·¥å…·ç±»çš„é™æ€æ–¹æ³•"
    },
    {
      "count": 5,
      "pattern_type": "æ•°æ®å¤„ç†",
      "examples": [
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "first_account.get('userid', first_account.get('phone', '')",
          "start": 20108,
          "end": 20166
        },
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "first_account.get('userid', first_account.get('phone', '')",
          "start": 20315,
          "end": 20373
        },
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "order_detail.get('orderno', order_detail.get('order_id', 'N/A')",
          "start": 153930,
          "end": 153993
        }
      ],
      "refactoring_suggestion": "æå–ä¸ºæ•°æ®å¤„ç†å·¥å…·ç±»çš„é™æ€æ–¹æ³•"
    },
    {
      "count": 69,
      "pattern_type": "æ•°æ®å¤„ç†",
      "examples": [
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "order_data.get('account')",
          "start": 24377,
          "end": 24402
        },
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "result.get('resultCode')",
          "start": 27420,
          "end": 27444
        },
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "order_detail.get('orderno')",
          "start": 29471,
          "end": 29498
        }
      ],
      "refactoring_suggestion": "æå–ä¸ºæ•°æ®å¤„ç†å·¥å…·ç±»çš„é™æ€æ–¹æ³•"
    },
    {
      "count": 43,
      "pattern_type": "æ•°æ®å¤„ç†",
      "examples": [
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "password_policy_result.get('requires_password', False)",
          "start": 30286,
          "end": 30340
        },
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "member_info.get('has_member_card', False)",
          "start": 31997,
          "end": 32038
        },
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "member_info.get('has_member_card', False)",
          "start": 32457,
          "end": 32498
        }
      ],
      "refactoring_suggestion": "æå–ä¸ºæ•°æ®å¤„ç†å·¥å…·ç±»çš„é™æ€æ–¹æ³•"
    },
    {
      "count": 14,
      "pattern_type": "æ•°æ®å¤„ç†",
      "examples": [
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "updated_order_detail.get('resultData', {})",
          "start": 34920,
          "end": 34962
        },
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "seat_result.get('resultData', {})",
          "start": 53251,
          "end": 53284
        },
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "seat.get('original_data', {})",
          "start": 61234,
          "end": 61263
        }
      ],
      "refactoring_suggestion": "æå–ä¸ºæ•°æ®å¤„ç†å·¥å…·ç±»çš„é™æ€æ–¹æ³•"
    },
    {
      "count": 7,
      "pattern_type": "æ•°æ®å¤„ç†",
      "examples": [
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "normalized_data.get('films', [])",
          "start": 44395,
          "end": 44427
        },
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "seat_data.get('seats', [])",
          "start": 54568,
          "end": 54594
        },
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "order_data.get('seats', [])",
          "start": 108746,
          "end": 108773
        }
      ],
      "refactoring_suggestion": "æå–ä¸ºæ•°æ®å¤„ç†å·¥å…·ç±»çš„é™æ€æ–¹æ³•"
    },
    {
      "count": 3,
      "pattern_type": "æ•°æ®å¤„ç†",
      "examples": [
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "seat.get('cn', physical_col + 1)",
          "start": 60098,
          "end": 60130
        },
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "seat.get('rn', physical_row + 1)",
          "start": 60230,
          "end": 60262
        },
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "seat.get('cn', physical_col + 1)",
          "start": 60351,
          "end": 60383
        }
      ],
      "refactoring_suggestion": "æå–ä¸ºæ•°æ®å¤„ç†å·¥å…·ç±»çš„é™æ€æ–¹æ³•"
    },
    {
      "count": 6,
      "pattern_type": "æ•°æ®å¤„ç†",
      "examples": [
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "seat.get('rn', seat.get('row', 1)",
          "start": 126799,
          "end": 126832
        },
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "seat.get('cn', seat.get('col', 1)",
          "start": 126861,
          "end": 126894
        },
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "seat.get('rn', seat.get('row', 1)",
          "start": 134112,
          "end": 134145
        }
      ],
      "refactoring_suggestion": "æå–ä¸ºæ•°æ®å¤„ç†å·¥å…·ç±»çš„é™æ€æ–¹æ³•"
    },
    {
      "count": 2,
      "pattern_type": "æ•°æ®å¤„ç†",
      "examples": [
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "session_data.get('first_price', session_data.get('b', 33.9)",
          "start": 127015,
          "end": 127074
        },
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "session_data.get('first_price', session_data.get('b', 33.9)",
          "start": 134466,
          "end": 134525
        }
      ],
      "refactoring_suggestion": "æå–ä¸ºæ•°æ®å¤„ç†å·¥å…·ç±»çš„é™æ€æ–¹æ³•"
    },
    {
      "count": 2,
      "pattern_type": "æ•°æ®å¤„ç†",
      "examples": [
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "coupon.get('name', f'åˆ¸{i+1}')",
          "start": 144834,
          "end": 144863
        },
        {
          "pattern": "(\\w+\\.get\\([^)]+\\))",
          "call": "coupon.get('code', f'åˆ¸å·{i+1}')",
          "start": 145145,
          "end": 145175
        }
      ],
      "refactoring_suggestion": "æå–ä¸ºæ•°æ®å¤„ç†å·¥å…·ç±»çš„é™æ€æ–¹æ³•"
    },
    {
      "count": 2,
      "pattern_type": "å…¶ä»–",
      "examples": [
        {
          "pattern": "(\\[.*?for.*?in.*?\\])",
          "call": "[line.strip() for line in coupon_text.split('\\n') if line.strip()]",
          "start": 26864,
          "end": 26930
        },
        {
          "pattern": "(\\[.*?for.*?in.*?\\])",
          "call": "[seat.strip() for seat in text.split(',') if seat.strip()]",
          "start": 65585,
          "end": 65643
        }
      ],
      "refactoring_suggestion": "è€ƒè™‘æå–ä¸ºå…¬å…±å‡½æ•°æˆ–å¸¸é‡"
    },
    {
      "count": 2,
      "pattern_type": "æ•°æ®å¤„ç†",
      "examples": [
        {
          "pattern": "(\\[.*?for.*?in.*?\\])",
          "call": "[seat.get('num', '') for seat in selected_seats]",
          "start": 62460,
          "end": 62508
        },
        {
          "pattern": "(\\[.*?for.*?in.*?\\])",
          "call": "[c.get('couponcode', '') for c in selected_coupons]",
          "start": 110443,
          "end": 110494
        }
      ],
      "refactoring_suggestion": "æå–ä¸ºæ•°æ®å¤„ç†å·¥å…·ç±»çš„é™æ€æ–¹æ³•"
    },
    {
      "count": 200,
      "pattern_type": "å…¶ä»–",
      "examples": [
        {
          "pattern": "(f[\"\\'].*?\\{.*?\\}.*?[\"\\'])",
          "call": "f\"[å¢å¼ºæ”¯ä»˜] âŒ åˆå§‹åŒ–å¤±è´¥: {e}\"",
          "start": 4297,
          "end": 4319
        },
        {
          "pattern": "(f[\"\\'].*?\\{.*?\\}.*?[\"\\'])",
          "call": "f\"å¯åŠ¨è®¤è¯æ£€æŸ¥å¤±è´¥: {str(e)}\"",
          "start": 16227,
          "end": 16248
        },
        {
          "pattern": "(f[\"\\'].*?\\{.*?\\}.*?[\"\\'])",
          "call": "f\"å¤„ç†ç™»å½•ç»“æœå¤±è´¥: {str(e)}\"",
          "start": 17126,
          "end": 17147
        }
      ],
      "refactoring_suggestion": "è€ƒè™‘æå–ä¸ºå…¬å…±å‡½æ•°æˆ–å¸¸é‡"
    },
    {
      "count": 11,
      "pattern_type": "æ•°æ®å¤„ç†",
      "examples": [
        {
          "pattern": "(f[\"\\'].*?\\{.*?\\}.*?[\"\\'])",
          "call": "f\"[ä¸»çª—å£] æ”¶åˆ°è®¢å•æäº¤ä¿¡å·: {order_data.get('trigger_type', 'unknown')}\"",
          "start": 24168,
          "end": 24230
        },
        {
          "pattern": "(f[\"\\'].*?\\{.*?\\}.*?[\"\\'])",
          "call": "f\"[ä¸»çª—å£] æ”¶åˆ°åº§ä½å›¾åŠ è½½è¯·æ±‚: {seat_load_data.get('trigger_type', 'unknown')}\"",
          "start": 63525,
          "end": 63592
        },
        {
          "pattern": "(f[\"\\'].*?\\{.*?\\}.*?[\"\\'])",
          "call": "f\"[ä¸»çª—å£] ğŸ“Š - æ•°æ®æ ¼å¼: {qr_data.get('data_format', 'UNKNOWN')}\"",
          "start": 75028,
          "end": 75086
        }
      ],
      "refactoring_suggestion": "æå–ä¸ºæ•°æ®å¤„ç†å·¥å…·ç±»çš„é™æ€æ–¹æ³•"
    },
    {
      "count": 15,
      "pattern_type": "é”™è¯¯å¤„ç†",
      "examples": [
        {
          "pattern": "(f[\"\\'].*?\\{.*?\\}.*?[\"\\'])",
          "call": "f\"å¯†ç ç­–ç•¥æ£€æµ‹å¤±è´¥: {password_policy_result.get('error')}\"",
          "start": 30178,
          "end": 30228
        },
        {
          "pattern": "(f[\"\\'].*?\\{.*?\\}.*?[\"\\'])",
          "call": "f\"[ä¸»çª—å£] åº§ä½æ•°æ®å­—æ®µ: {list(seat_data.keys()) if seat_data else 'ç©ºæ•°æ®'}\"",
          "start": 54002,
          "end": 54067
        },
        {
          "pattern": "(f[\"\\'].*?\\{.*?\\}.*?[\"\\'])",
          "call": "f\"âœ… åº§ä½å›¾åŠ è½½æˆåŠŸ\\\\n\\\\nå½±å…: {hall_info['name']}\\\\nåœºæ¬¡: {session_text}\\\\nåº§ä½: {hall_info['",
          "start": 56448,
          "end": 56528
        }
      ],
      "refactoring_suggestion": "åˆ›å»ºç»Ÿä¸€çš„é”™è¯¯å¤„ç†è£…é¥°å™¨æˆ–åŸºç±»æ–¹æ³•"
    },
    {
      "count": 2,
      "pattern_type": "æ•°æ®å¤„ç†",
      "examples": [
        {
          "pattern": "(f[\"\\'].*?\\{.*?\\}.*?[\"\\'])",
          "call": "f\"[ä¸»çª—å£] å–æ¶ˆè®¢å•å¤±è´¥: {result.get('resultDesc', 'æœªçŸ¥é”™è¯¯') if result else 'ç½‘ç»œé”™è¯¯'}\"",
          "start": 36440,
          "end": 36513
        },
        {
          "pattern": "(f[\"\\'].*?\\{.*?\\}.*?[\"\\'])",
          "call": "f\"APIè·å– - {'éœ€è¦' if enable_mempassword == '1' else 'ä¸éœ€è¦'}ä¼šå‘˜å¡å¯†ç \"",
          "start": 94311,
          "end": 94373
        }
      ],
      "refactoring_suggestion": "æå–ä¸ºæ•°æ®å¤„ç†å·¥å…·ç±»çš„é™æ€æ–¹æ³•"
    },
    {
      "count": 32,
      "pattern_type": "æ•°æ®å¤„ç†",
      "examples": [
        {
          "pattern": "(f[\"\\'].*?\\{.*?\\}.*?[\"\\'])",
          "call": "f\"[ä¸»çª—å£] æ”¶åˆ°åœºæ¬¡é€‰æ‹©ä¿¡å·: {session_info.get('session_text', 'N/A')}\"",
          "start": 47830,
          "end": 47890
        },
        {
          "pattern": "(f[\"\\'].*?\\{.*?\\}.*?[\"\\'])",
          "call": "f\"  - å½±é™¢åç§°: {cinema_data.get('cinemaShortName', 'N/A')}\"",
          "start": 51503,
          "end": 51559
        },
        {
          "pattern": "(f[\"\\'].*?\\{.*?\\}.*?[\"\\'])",
          "call": "f\"  - å½±é™¢ID: {cinema_data.get('cinemaid', 'N/A')}\"",
          "start": 51579,
          "end": 51628
        }
      ],
      "refactoring_suggestion": "æå–ä¸ºæ•°æ®å¤„ç†å·¥å…·ç±»çš„é™æ€æ–¹æ³•"
    },
    {
      "count": 2,
      "pattern_type": "å…¶ä»–",
      "examples": [
        {
          "pattern": "(f[\"\\'].*?\\{.*?\\}.*?[\"\\'])",
          "call": "f\"ç¼ºå°‘å¿…è¦å‚æ•°: {', '.join(missing_params)}\"",
          "start": 52763,
          "end": 52801
        },
        {
          "pattern": "(f[\"\\'].*?\\{.*?\\}.*?[\"\\'])",
          "call": "f\"å·²é€‰æ‹©åº§ä½: {', '.join(seats)}\\n\\n\"",
          "start": 87679,
          "end": 87711
        }
      ],
      "refactoring_suggestion": "è€ƒè™‘æå–ä¸ºå…¬å…±å‡½æ•°æˆ–å¸¸é‡"
    },
    {
      "count": 2,
      "pattern_type": "æ•°æ®å¤„ç†",
      "examples": [
        {
          "pattern": "(f[\"\\'].*?\\{.*?\\}.*?[\"\\'])",
          "call": "f\"è®¢å• {qr_data.get('order_no', '')} å–ç¥¨ç \\n(æ•°æ®ä¸ºç©º)\"",
          "start": 75754,
          "end": 75801
        },
        {
          "pattern": "(f[\"\\'].*?\\{.*?\\}.*?[\"\\'])",
          "call": "f\"{session_data.get('show_date', '')} {session_data.get('",
          "start": 136735,
          "end": 136792
        }
      ],
      "refactoring_suggestion": "æå–ä¸ºæ•°æ®å¤„ç†å·¥å…·ç±»çš„é™æ€æ–¹æ³•"
    },
    {
      "count": 6,
      "pattern_type": "å…¶ä»–",
      "examples": [
        {
          "pattern": "(if\\s+\\w+\\s+is\\s+(None|not\\s+None))",
          "call": "if member_password is None",
          "start": 30951,
          "end": 30977
        },
        {
          "pattern": "(if\\s+\\w+\\s+is\\s+(None|not\\s+None))",
          "call": "if coupon_result is None",
          "start": 138798,
          "end": 138822
        },
        {
          "pattern": "(if\\s+\\w+\\s+is\\s+(None|not\\s+None))",
          "call": "if result_data is None",
          "start": 139492,
          "end": 139514
        }
      ],
      "refactoring_suggestion": "è€ƒè™‘æå–ä¸ºå…¬å…±å‡½æ•°æˆ–å¸¸é‡"
    },
    {
      "count": 5,
      "pattern_type": "å…¶ä»–",
      "examples": [
        {
          "pattern": "(if\\s+\\w+\\s+is\\s+(None|not\\s+None))",
          "call": "if result_data is not None",
          "start": 37812,
          "end": 37838
        },
        {
          "pattern": "(if\\s+\\w+\\s+is\\s+(None|not\\s+None))",
          "call": "if enable_mempassword is not None",
          "start": 93807,
          "end": 93840
        },
        {
          "pattern": "(if\\s+\\w+\\s+is\\s+(None|not\\s+None))",
          "call": "if coupon_list_widget is not None",
          "start": 141204,
          "end": 141237
        }
      ],
      "refactoring_suggestion": "è€ƒè™‘æå–ä¸ºå…¬å…±å‡½æ•°æˆ–å¸¸é‡"
    }
  ],
  "import_analysis": {
    "total_imports": 21,
    "unused_imports": {
      "sys\nimport os\nfrom typing import Dict": 1,
      "Optional": 1,
      "Any\nfrom PyQt5.QtWidgets import": 1,
      "ui.widgets.classic_components.apply_classic_theme_to_widget\nfrom ui": 1,
      "ui.widgets.tab_manager_widget.TabManagerWidget\nfrom ui": 1,
      "services.auth_service.AuthService\nfrom services": 1,
      "services.cinema_manager.CinemaManager\nfrom services": 1,
      "services.member_service.MemberService\nfrom services": 1,
      "ui.login_window.LoginWindow\n\n\nclass ModularCinemaMainWindow": 1
    },
    "usage_stats": {
      "sys\nimport os\nfrom typing import Dict": 1,
      "List": 9,
      "Optional": 1,
      "Any\nfrom PyQt5.QtWidgets import": 1,
      "PyQt5.QtCore.Qt": 21,
      "PyQt5.QtCore.pyqtSignal": 2,
      "PyQt5.QtCore.pyqtSlot": 2,
      "PyQt5.QtCore.QTimer": 7,
      "utils.signals.event_bus": 13,
      "ui.widgets.classic_components.apply_classic_theme_to_widget\nfrom ui": 1,
      "ui.widgets.tab_manager_widget.TabManagerWidget\nfrom ui": 1,
      "services.auth_service.AuthService\nfrom services": 1,
      "services.cinema_manager.CinemaManager\nfrom services": 1,
      "services.member_service.MemberService\nfrom services": 1,
      "json": 9,
      "os": 6,
      "time": 4,
      "traceback": 67,
      "PyQt5.QtWidgets.QInputDialog": 7,
      "PyQt5.QtWidgets.QLineEdit": 7,
      "ui.login_window.LoginWindow\n\n\nclass ModularCinemaMainWindow": 1
    }
  },
  "method_complexity": [
    {
      "name": "__init__",
      "lines": 3591,
      "if_count": 307,
      "for_count": 35,
      "try_count": 103,
      "complexity_score": 4584,
      "refactoring_suggestion": "æ–¹æ³•è¿‡é•¿ï¼Œå»ºè®®æ‹†åˆ†ä¸ºå¤šä¸ªå°æ–¹æ³•"
    }
  ],
  "refactoring_opportunities": [
    {
      "type": "APIç»Ÿä¸€åŒ–",
      "priority": "high",
      "description": "å‘ç° 6 ä¸ªç›¸ä¼¼çš„APIè°ƒç”¨æ¨¡å¼",
      "suggestion": "æå–ä¸ºé€šç”¨APIè°ƒç”¨æ–¹æ³•ï¼Œç»Ÿä¸€é”™è¯¯å¤„ç†å’Œå‚æ•°éªŒè¯",
      "estimated_reduction": "30 è¡Œä»£ç "
    },
    {
      "type": "UIç»„ä»¶åŒ–",
      "priority": "medium",
      "description": "å‘ç° 21 ä¸ªç›¸ä¼¼çš„å…¶ä»–æ¨¡å¼",
      "suggestion": "è€ƒè™‘æå–ä¸ºå…¬å…±å‡½æ•°æˆ–å¸¸é‡",
      "estimated_reduction": "63 è¡Œä»£ç "
    },
    {
      "type": "UIç»„ä»¶åŒ–",
      "priority": "medium",
      "description": "å‘ç° 17 ä¸ªç›¸ä¼¼çš„UIç»„ä»¶æ¨¡å¼",
      "suggestion": "åˆ›å»ºUIç»„ä»¶å·¥å‚ç±»ï¼Œç»Ÿä¸€ç»„ä»¶åˆ›å»ºå’Œæ ·å¼è®¾ç½®",
      "estimated_reduction": "51 è¡Œä»£ç "
    },
    {
      "type": "UIç»„ä»¶åŒ–",
      "priority": "medium",
      "description": "å‘ç° 5 ä¸ªç›¸ä¼¼çš„UIç»„ä»¶æ¨¡å¼",
      "suggestion": "åˆ›å»ºUIç»„ä»¶å·¥å‚ç±»ï¼Œç»Ÿä¸€ç»„ä»¶åˆ›å»ºå’Œæ ·å¼è®¾ç½®",
      "estimated_reduction": "15 è¡Œä»£ç "
    },
    {
      "type": "UIç»„ä»¶åŒ–",
      "priority": "medium",
      "description": "å‘ç° 5 ä¸ªç›¸ä¼¼çš„å…¶ä»–æ¨¡å¼",
      "suggestion": "è€ƒè™‘æå–ä¸ºå…¬å…±å‡½æ•°æˆ–å¸¸é‡",
      "estimated_reduction": "15 è¡Œä»£ç "
    },
    {
      "type": "UIç»„ä»¶åŒ–",
      "priority": "medium",
      "description": "å‘ç° 9 ä¸ªç›¸ä¼¼çš„UIç»„ä»¶æ¨¡å¼",
      "suggestion": "åˆ›å»ºUIç»„ä»¶å·¥å‚ç±»ï¼Œç»Ÿä¸€ç»„ä»¶åˆ›å»ºå’Œæ ·å¼è®¾ç½®",
      "estimated_reduction": "27 è¡Œä»£ç "
    },
    {
      "type": "UIç»„ä»¶åŒ–",
      "priority": "medium",
      "description": "å‘ç° 35 ä¸ªç›¸ä¼¼çš„å…¶ä»–æ¨¡å¼",
      "suggestion": "è€ƒè™‘æå–ä¸ºå…¬å…±å‡½æ•°æˆ–å¸¸é‡",
      "estimated_reduction": "105 è¡Œä»£ç "
    },
    {
      "type": "é”™è¯¯å¤„ç†ç»Ÿä¸€åŒ–",
      "priority": "medium",
      "description": "å‘ç° 5 ä¸ªç›¸ä¼¼çš„UIç»„ä»¶æ¨¡å¼",
      "suggestion": "åˆ›å»ºUIç»„ä»¶å·¥å‚ç±»ï¼Œç»Ÿä¸€ç»„ä»¶åˆ›å»ºå’Œæ ·å¼è®¾ç½®",
      "estimated_reduction": "20 è¡Œä»£ç "
    },
    {
      "type": "é”™è¯¯å¤„ç†ç»Ÿä¸€åŒ–",
      "priority": "medium",
      "description": "å‘ç° 3 ä¸ªç›¸ä¼¼çš„UIç»„ä»¶æ¨¡å¼",
      "suggestion": "åˆ›å»ºUIç»„ä»¶å·¥å‚ç±»ï¼Œç»Ÿä¸€ç»„ä»¶åˆ›å»ºå’Œæ ·å¼è®¾ç½®",
      "estimated_reduction": "12 è¡Œä»£ç "
    },
    {
      "type": "æ–¹æ³•ç®€åŒ–",
      "priority": "high",
      "description": "æ–¹æ³• __init__ å¤æ‚åº¦è¿‡é«˜ (4584)",
      "suggestion": "æ–¹æ³•è¿‡é•¿ï¼Œå»ºè®®æ‹†åˆ†ä¸ºå¤šä¸ªå°æ–¹æ³•",
      "estimated_reduction": "1197 è¡Œä»£ç "
    }
  ]
}