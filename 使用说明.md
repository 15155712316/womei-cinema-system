# 🎬 乐影系统使用说明

## 📋 最新修复内容 (2024-12-29)

### ✅ 登录历史记忆功能
- **自动保存手机号**: 登录成功后自动保存手机号
- **自动填入**: 下次启动时自动填入上次登录的手机号
- **无需重复输入**: 提升用户体验，节省时间

### ✅ 券列表错误处理增强
- **修复崩溃问题**: 解决账号没有券时的"NoneType"错误
- **API异常处理**: 增强对API返回异常数据的处理
- **友好提示**: 不同错误情况显示相应的提示信息

## 🚀 快速开始

### 1. 启动程序
- **方式一**: 双击 `启动程序.bat` 文件
- **方式二**: 在命令行运行 `python main.py`

### 2. 用户登录
1. 程序启动后会自动显示登录窗口
2. **首次使用**: 输入11位手机号（如：15155712316）
3. **再次使用**: 手机号会自动填入，直接点击登录即可
4. 登录成功后进入主界面

### 3. 基本操作流程
1. **选择账号**: 在左侧账号列表中选择要使用的账号
2. **选择影院**: 在影院下拉框中选择目标影院
3. **选择影片**: 选择要观看的电影
4. **选择日期**: 选择观影日期
5. **选择场次**: 选择具体的放映场次
6. **选择座位**: 在座位图中点击选择座位
7. **选择优惠券**: 在券列表中选择要使用的优惠券
8. **提交订单**: 点击"提交订单"按钮完成下单

## 🔧 常见问题解决

### Q1: 登录时提示"设备未授权"
**解决方案**:
1. 复制登录窗口显示的机器码
2. 联系管理员将机器码添加到系统中
3. 或访问管理后台更新机器码

### Q2: 券列表显示"API无响应"或"无可用优惠券"
**说明**: 这是正常现象，表示：
- API无响应：网络问题或服务器暂时不可用
- 无可用优惠券：当前账号确实没有可用的优惠券
- 券数据为空：API返回了空数据

### Q3: 程序启动失败
**检查步骤**:
1. 确认Python版本（推荐3.10+）
2. 安装依赖：`pip install -r requirements.txt`
3. 检查网络连接
4. 查看错误信息并联系技术支持

### Q4: 手机号没有自动填入
**可能原因**:
- 首次使用（正常现象）
- 登录历史文件损坏（删除data/login_history.json重新登录）
- 上次登录失败（重新成功登录一次即可）

## 📞 技术支持

如遇到其他问题，请：
1. 查看控制台错误信息
2. 检查网络连接状态
3. 确认API服务器状态
4. 联系技术支持并提供详细错误信息

## 🎯 使用技巧

1. **快速登录**: 登录成功一次后，下次启动直接点击登录即可
2. **券列表刷新**: 如果券列表显示异常，可以切换账号或影院重新加载
3. **座位选择**: 支持多选座位，价格会实时计算
4. **订单管理**: 可在订单列表中查看历史订单和取票码

---

**版本**: v1.2.1  
**更新日期**: 2024-12-29  
**修复内容**: 登录历史记忆 + 券列表错误处理 